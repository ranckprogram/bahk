<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/css/common.css">
</head>

<body>
    <div class="container">
        <form class="forminput edit">
            <ul>
                <li style="display: none;">
                    <input type="hidden" name="" id="paperid" data-id="<{$paper.id}>">
                </li>
                <li style="display: none;">
                    <input type="hidden" name="" id="edittxt" value="<{$paper.text}>">
                </li>
                <li>
                    <input type="text" name="title" placeholder="标题" id="title" value="<{$paper.title}>">
                </li>
                <li>
                    <script id="container" name="content" type="text/plain" class="ue">
                    </script>
                </li>
                <li>
                    <input type="submit" name="" value="保存" id="save" class="btn_deal">
                    <input type="button" name="" value="返回" id="back" class="btn_deal">
                </li>
            </ul>
        </form>
    </div>
</body>
<script type="text/javascript" src="__PUBLIC__/js/jquery.js"></script>
<script type="text/javascript" src="__PUBLIC__/plus/edit/ueditor.config.js"></script>
<script type="text/javascript" src="__PUBLIC__/plus/edit/ueditor.all.js"></script>
<script type="text/javascript" src="__PUBLIC__/plus/layer/layer.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var ue = UE.getEditor('container');
    //	编辑  -  会有内容的，最后 内容 会存在
    var proinfo = $("#edittxt").attr("value");
    if (proinfo) {
        ue.ready(function() { //编辑器初始化完成再赋值  
            ue.setContent(proinfo); //赋值给UEditor  
        });
    }


    $("#back").click(function() {
        location.href = ("__URL__/alist");
    });
    $("#save").click(function(e) {
        e.preventDefault();
        var title = $("#title").val();
        var text = ue.getContent();
        var id = $("#paperid").attr("data-id");
        if (!proinfo) {
            console.log(typeof !proinfo);
            $.post("__URL__/save", {
                    title: title,
                    text: text
                },
                function() {
                    layer.msg('保存成功');
                    $("#title").val("");
                    ue.setContent('')
                });
        } else {
            $.post("__URL__/update", {
                    id: id,
                    title: title,
                    text: text
                },
                function() {
                    layer.msg('保存成功');
                });
        }
    });

});
</script>

</html>
